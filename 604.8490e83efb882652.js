"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[604],{3657:($,R,l)=>{l.d(R,{R:()=>g});var r=l(655),A=l(8995),I=l(2011),y=l(2717),P=l(6895);class g{constructor(S){this.store=S}increment(){this.store.dispatch(new I.MP)}decrement(){this.store.dispatch(new I.FB)}}g.\u0275fac=function(S){return new(S||g)(y.Y36(A.yh))},g.\u0275cmp=y.Xpm({type:g,selectors:[["app-counter"]],decls:7,vars:3,consts:[[3,"click"]],template:function(S,M){1&S&&(y.TgZ(0,"p"),y._uU(1),y.ALo(2,"async"),y.qZA(),y.TgZ(3,"button",0),y.NdJ("click",function(){return M.increment()}),y._uU(4,"Increment"),y.qZA(),y.TgZ(5,"button",0),y.NdJ("click",function(){return M.decrement()}),y._uU(6,"Decrement"),y.qZA()),2&S&&(y.xp6(1),y.hij("counter works! the count is ",y.lcZ(2,1,M.count$),""))},dependencies:[P.Ov]}),(0,r.gn)([(0,A.Ph)(I.uT)],g.prototype,"count$",void 0)},7848:($,R,l)=>{l.d(R,{k:()=>P});var r=l(6895),A=l(329),I=l(2011),y=l(2717);let P=(()=>{class g{}return g.\u0275fac=function(S){return new(S||g)},g.\u0275mod=y.oAB({type:g}),g.\u0275inj=y.cJS({providers:[{provide:A._F,useValue:[I.MP,I.FB],multi:!0}],imports:[r.ez]}),g})()},2011:($,R,l)=>{l.d(R,{FB:()=>P,MP:()=>y,uT:()=>g});var r=l(655),A=l(8995),I=l(2717);let y=(()=>{class T{}return T.type="[Counter] Increment",T})(),P=(()=>{class T{}return T.type="[Counter] Decrement",T})(),g=class{change(S,M){M instanceof y?S.setState(S.getState()+1):M instanceof P&&S.setState(S.getState()-1)}};g.\u0275fac=function(S){return new(S||g)},g.\u0275prov=I.Yz7({token:g,factory:g.\u0275fac}),(0,r.gn)([(0,A.aU)([y,P])],g.prototype,"change",null),g=(0,r.gn)([(0,A.ZM)({name:"counter",defaults:0})],g)},2689:($,R,l)=>{l.d(R,{ns:()=>w});var r=l(2717),A=l(8995),I=l(262),y=l(8505);const S=new r.OlP("NGXS_DEVTOOLS_OPTIONS");let z=(()=>{class m{constructor(E,x,N){this._options=E,this._injector=x,this._ngZone=N,this.devtoolsExtension=null,this.globalDevtools=r.dqk.__REDUX_DEVTOOLS_EXTENSION__||r.dqk.devToolsExtension,this.unsubscribe=null,this.connect()}ngOnDestroy(){null!==this.unsubscribe&&this.unsubscribe(),this.globalDevtools&&this.globalDevtools.disconnect()}get store(){return this._injector.get(A.yh)}handle(E,x,N){return!this.devtoolsExtension||this._options.disabled?N(E,x):N(E,x).pipe((0,I.K)(j=>{const B=this.store.snapshot();throw this.sendToDevTools(E,x,B),j}),(0,y.b)(j=>{this.sendToDevTools(E,x,j)}))}sendToDevTools(E,x,N){const j=(0,A.f4)(x);"@@INIT"===j?this.devtoolsExtension.init(E):this.devtoolsExtension.send(Object.assign({},x,{action:null,type:j}),N)}dispatched(E){if("DISPATCH"===E.type){if("JUMP_TO_ACTION"===E.payload.type||"JUMP_TO_STATE"===E.payload.type){const x=JSON.parse(E.state);x.router&&x.router.trigger&&(x.router.trigger="devtools"),this.store.reset(x)}else if("TOGGLE_ACTION"===E.payload.type)console.warn("Skip is not supported at this time.");else if("IMPORT_STATE"===E.payload.type){const{actionsById:x,computedStates:N,currentStateIndex:j}=E.payload.nextLiftedState;this.devtoolsExtension.init(N[0].state),Object.keys(x).filter(B=>"0"!==B).forEach(B=>this.devtoolsExtension.send(x[B],N[B].state)),this.store.reset(N[j].state)}}else if("ACTION"===E.type){const x=JSON.parse(E.payload);this.store.dispatch(x)}}connect(){!this.globalDevtools||this._options.disabled||(this.devtoolsExtension=this._ngZone.runOutsideAngular(()=>this.globalDevtools.connect(this._options)),this.unsubscribe=this.devtoolsExtension.subscribe(E=>{("DISPATCH"===E.type||"ACTION"===E.type)&&this._ngZone.run(()=>{this.dispatched(E)})}))}}return m.\u0275fac=function(E){return new(E||m)(r.LFG(S),r.LFG(r.zs3),r.LFG(r.R0b))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac}),m})();function Y(m){return Object.assign({name:"NGXS"},m)}const k=new r.OlP("USER_OPTIONS");let w=(()=>{class m{static forRoot(E){return{ngModule:m,providers:[{provide:A.fN,useClass:z,multi:!0},{provide:k,useValue:E},{provide:S,useFactory:Y,deps:[k]}]}}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({}),m})()},8995:($,R,l)=>{l.d(R,{aU:()=>Xe,XP:()=>re,fN:()=>Vt,$l:()=>U,Ph:()=>en,ZM:()=>Ze,yh:()=>yt,f4:()=>at});var r=l(2717),A=l(7579);const I={now:()=>(I.delegate||Date).now(),delegate:void 0};class y extends A.x{constructor(n=1/0,e=1/0,s=I){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:s,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:u}=this;e||(s.push(n),!o&&s.push(i.now()+u)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:s,_buffer:o}=this,i=o.slice();for(let u=0;u<i.length&&!n.closed;u+=s?1:2)n.next(i[u]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:s,_infiniteTimeWindow:o}=this,i=(o?1:2)*n;if(n<1/0&&i<s.length&&s.splice(0,s.length-i),!o){const u=e.now();let p=0;for(let h=1;h<s.length&&s[h]<=u;h+=2)p=h;p&&s.splice(0,p+1)}}}let g=(()=>{class t{constructor(){this.bootstrap$=new y(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function T(t,n){return t===n}function S(t,n,e){if(null===n||null===e||n.length!==e.length)return!1;const s=n.length;for(let o=0;o<s;o++)if(!t(n[o],e[o]))return!1;return!0}const G=new r.OlP("INITIAL_STATE_TOKEN");let z=(()=>{class t{static set(e){this.value=e}static pop(){const e=this.value;return this.value={},e}}return t.value={},t})();const Y=new r.OlP("Internals.StateContextFactory"),k=new r.OlP("Internals.StateFactory");var w=l(6895),m=l(8306);class et extends A.x{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:s}=this;if(n)throw e;return this._throwIfClosed(),s}next(n){super.next(this._value=n)}}var E=l(7669),x=l(457);function N(...t){const n=(0,E.yG)(t);return(0,x.D)(t,n)}const{isArray:j}=Array,{getPrototypeOf:B,prototype:nt,keys:ht}=Object;var J=l(8421),H=l(5403),Ft=l(3268);function wt(t,n){return t.reduce((e,s,o)=>(e[s]=n[o],e),{})}function st(...t){const n=(0,E.jO)(t),{args:e,keys:s}=function mt(t){if(1===t.length){const n=t[0];if(j(n))return{args:n,keys:null};if(function Z(t){return t&&"object"==typeof t&&B(t)===nt}(n)){const e=ht(n);return{args:e.map(s=>n[s]),keys:e}}}return{args:t,keys:null}}(t),o=new m.y(i=>{const{length:u}=e;if(!u)return void i.complete();const p=new Array(u);let h=u,D=u;for(let v=0;v<u;v++){let F=!1;(0,J.Xf)(e[v]).subscribe((0,H.x)(i,L=>{F||(F=!0,D--),p[v]=L},()=>h--,void 0,()=>{(!h||!F)&&(D||i.next(s?wt(s,p):p),i.complete())}))}});return n?o.pipe((0,Ft.Z)(n)):o}var Ot=l(576);function ot(t,n){const e=(0,Ot.m)(t)?t:()=>t,s=o=>o.error(e());return new m.y(n?o=>n.schedule(s,0,o):s)}var pt=l(515),Nt=l(727);class Et extends Nt.w0{constructor(n,e){super()}schedule(n,e=0){return this}}const rt={setInterval(t,n,...e){const{delegate:s}=rt;return s?.setInterval?s.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=rt;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var gt=l(8737);class Mt extends Et{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var s;if(this.closed)return this;this.state=n;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,e)),this.pending=!0,this.delay=e,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(i,this.id,e),this}requestAsyncId(n,e,s=0){return rt.setInterval(n.flush.bind(n,this),s)}recycleAsyncId(n,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;null!=e&&rt.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(n,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let o,s=!1;try{this.work(n)}catch(i){s=!0,o=i||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,gt.P)(s,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}class q{constructor(n,e=q.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,s){return new this.schedulerActionCtor(this,n).schedule(s,e)}}q.now=I.now;class Rt extends q{constructor(n,e=q.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,s){for(;n=e.shift();)n.unsubscribe();throw s}}}const Dt=new class _t extends Rt{}(class Q extends Mt{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}schedule(n,e=0){return e>0?super.schedule(n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)}execute(n,e){return e>0||this.closed?super.execute(n,e):this._execute(n,e)}requestAsyncId(n,e,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(n,e,s):(n.flush(this),0)}});var d=l(9300),c=l(4004),f=l(3099);function O(t,n,e){let s,o=!1;return t&&"object"==typeof t?({bufferSize:s=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=t):s=t??1/0,(0,f.B)({connector:()=>new y(s,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var _=l(4482);function C(t){return t<=0?()=>pt.E:(0,_.e)((n,e)=>{let s=0;n.subscribe((0,H.x)(e,o=>{++s<=t&&(e.next(o),t<=s&&e.complete())}))})}function K(t,n){return n?e=>e.pipe(K((s,o)=>(0,J.Xf)(t(s,o)).pipe((0,c.U)((i,u)=>n(s,i,o,u))))):(0,_.e)((e,s)=>{let o=0,i=null,u=!1;e.subscribe((0,H.x)(s,p=>{i||(i=(0,H.x)(s,void 0,()=>{i=null,u&&s.complete()}),(0,J.Xf)(t(p,o++)).subscribe(i))},()=>{u=!0,!i&&s.complete()}))})}var tt=l(5577);function Kt(t){return(0,_.e)((n,e)=>{let s=!1;n.subscribe((0,H.x)(e,o=>{s=!0,e.next(o)},()=>{s||e.next(t),e.complete()}))})}var Wt=l(262),ie=l(5032);function ae(t){return(0,_.e)((n,e)=>{(0,J.Xf)(t).subscribe((0,H.x)(e,()=>e.complete(),ie.Z)),!e.closed&&n.subscribe(e)})}var ce=l(8505),ue=l(5363),le=l(4671);function de(t,n){return t===n}class W{constructor(n,e){this._ngZone=n,this._platformId=e}enter(n){return(0,w.PM)(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return r.R0b.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return r.R0b.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}W.\u0275fac=function(n){return new(n||W)(r.LFG(r.R0b),r.LFG(r.Lbi))},W.\u0275prov=r.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W.ngInjectableDef=(0,r.Ez6)({factory:function(){return new W((0,r.f3M)(r.R0b),(0,r.f3M)(r.Lbi))},token:W,providedIn:"root"});const $t=new r.OlP("ROOT_STATE_TOKEN"),Yt=new r.OlP("FEATURE_STATE_TOKEN"),Vt=new r.OlP("NGXS_PLUGINS"),V="NGXS_META",Xt="NGXS_OPTIONS_META";let it=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=W}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Me{constructor(n,e,s){this.previousValue=n,this.currentValue=e,this.firstChange=s}}class X{enter(n){return n()}leave(n){return n()}}X.\u0275fac=function(n){return new(n||X)},X.\u0275prov=r.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X.ngInjectableDef=(0,r.Ez6)({factory:function(){return new X},token:X,providedIn:"root"});const Zt=new r.OlP("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),_e=new r.OlP("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=(0,r.f3M)(r.gxx),n=t.get(Zt);return t.get(n||(typeof r.dqk.Zone<"u"?W:X))}});function at(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const Jt=(t,n,e)=>{t=Object.assign({},t);const s=n.split("."),o=s.length-1;return s.reduce((i,u,p)=>(i[u]=p===o?e:Array.isArray(i[u])?i[u].slice():Object.assign({},i[u]),i&&i[u]),t),t},At=(t,n)=>n.split(".").reduce((e,s)=>e&&e[s],t),bt=t=>t&&"object"==typeof t&&!Array.isArray(t),Gt=(t,...n)=>{if(!n.length)return t;const e=n.shift();if(bt(t)&&bt(e))for(const s in e)bt(e[s])?(t[s]||Object.assign(t,{[s]:{}}),Gt(t[s],e[s])):Object.assign(t,{[s]:e[s]});return Gt(t,...n)};function Ut(t){if(!t.hasOwnProperty(V)){const n={name:null,actions:{},defaults:{},path:null,makeRootSelector:e=>e.getStateGetter(n.name),children:[]};Object.defineProperty(t,V,{value:n})}return ct(t)}function ct(t){return t[V]}function Qt(t,n){return n&&n.compatibility&&n.compatibility.strictContentSecurityPolicy?function De(t){const n=t.slice();return e=>n.reduce((s,o)=>s&&s[o],e)}(t):function Ae(t){const n=t;let e="store."+n[0],s=0;const o=n.length;let i=e;for(;++s<o;)i=i+" && "+(e=e+"."+n[s]);return new Function("store","return "+i+";")}(t)}function qt(t,n){const e=At(n.currentAppState,t.path),s=At(n.newAppState,t.path);return new Me(e,s,!t.isInitialised)}function Fe(...t){return function ut(t,n,e=Re){const s=function Le(t){return t.reduce((n,e)=>(n[at(e)]=!0,n),{})}(t),o=n&&function be(t){return t.reduce((n,e)=>(n[e]=!0,n),{})}(n);return function(i){return i.pipe(function we(t,n){return(0,d.h)(e=>{const s=at(e.action);return t[s]&&(!n||n[e.status])})}(s,o),e())}}(t,["DISPATCHED"])}function Re(){return(0,c.U)(t=>t.action)}function St(t){return n=>new m.y(e=>n.subscribe({next(s){t.leave(()=>e.next(s))},error(s){t.leave(()=>e.error(s))},complete(){t.leave(()=>e.complete())}}))}let Tt=(()=>{class t{constructor(e){this._executionStrategy=e}enter(e){return this._executionStrategy.enter(e)}leave(e){return this._executionStrategy.leave(e)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(_e))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Ge extends A.x{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(n){if(this._busyPushingNext)this._itemQueue.unshift(n);else{for(this._busyPushingNext=!0,super.next(n);this._itemQueue.length>0;){const e=this._itemQueue.pop();super.next(e)}this._busyPushingNext=!1}}}let Ct=(()=>{class t extends Ge{}return t.\u0275fac=function(){let n;return function(s){return(n||(n=r.n5z(t)))(s||t)}}(),t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ue=(()=>{class t extends m.y{constructor(e,s){super(o=>{const i=e.pipe(St(s)).subscribe({next:u=>o.next(u),error:u=>o.error(u),complete:()=>o.complete()});o.add(i)})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ct),r.LFG(Tt))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const te=t=>(...n)=>t.shift()(...n,(...s)=>te(t)(...s));let xt=(()=>{class t extends et{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),kt=(()=>{class t{constructor(e,s){this._parentManager=e,this._pluginHandlers=s,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const e=this.getPluginHandlers();this.rootPlugins.push(...e)}getPluginHandlers(){return(this._pluginHandlers||[]).map(s=>s.handle?s.handle.bind(s):s)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12),r.LFG(Vt,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),jt=(()=>{class t extends A.x{}return t.\u0275fac=function(){let n;return function(s){return(n||(n=r.n5z(t)))(s||t)}}(),t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ee=(()=>{class t{constructor(e,s,o,i,u,p){this._injector=e,this._actions=s,this._actionResults=o,this._pluginManager=i,this._stateStream=u,this._ngxsExecutionStrategy=p}dispatch(e){const s=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(e));return s.subscribe({error:o=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(r.qLn),this._errorHandler.handleError(o)}catch{}})}),s.pipe(St(this._ngxsExecutionStrategy))}dispatchByEvents(e){return Array.isArray(e)?0===e.length?N(this._stateStream.getValue()):st(e.map(s=>this.dispatchSingle(s))):this.dispatchSingle(e)}dispatchSingle(e){const s=this._stateStream.getValue();return te([...this._pluginManager.plugins,(i,u)=>{i!==s&&this._stateStream.next(i);const p=this.getActionResultStream(u);return p.subscribe(h=>this._actions.next(h)),this._actions.next({action:u,status:"DISPATCHED"}),this.createDispatchObservable(p)}])(s,e).pipe(O())}getActionResultStream(e){return this._actionResults.pipe((0,d.h)(s=>s.action===e&&"DISPATCHED"!==s.status),C(1),O())}createDispatchObservable(e){return e.pipe(K(s=>{switch(s.status){case"SUCCESSFUL":return N(this._stateStream.getValue());case"ERRORED":return ot(s.error);default:return pt.E}})).pipe(O())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3),r.LFG(Ct),r.LFG(jt),r.LFG(kt),r.LFG(xt),r.LFG(Tt))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),lt=(()=>{class t{constructor(e,s,o){this._stateStream=e,this._dispatcher=s,this._config=o}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:s=>this._stateStream.next(s),dispatch:s=>this._dispatcher.dispatch(s)}}setStateToTheCurrentWithNew(e){const s=this.getRootStateOperations(),o=s.getState();s.setState(Object.assign({},o,e.defaults))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xt),r.LFG(ee),r.LFG(it))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();let It=(()=>{class t{constructor(e){this._internalStateOperations=e}createStateContext(e){const s=this._internalStateOperations.getRootStateOperations();function o(h){return At(h,e.path)}function i(h,D){const v=Jt(h,e.path,D),F=e.instance;if(F.ngxsOnChanges){const L=qt(e,{currentAppState:h,newAppState:v});F.ngxsOnChanges(L)}return s.setState(v),v}function u(h,D){return i(h,D(o(h)))}return{getState:()=>o(s.getState()),patchState:h=>u(s.getState(),function Be(t){return n=>{Array.isArray(t)?function Oe(){throw new Error("Patching arrays is not supported.")}():"object"!=typeof t&&function Ee(){throw new Error("Patching primitives is not supported.")}();const e=Object.assign({},n);for(const s in t)e[s]=t[s];return e}}(h)),setState(h){const D=s.getState();return function p(h){return"function"==typeof h}(h)?u(D,h):i(D,h)},dispatch:h=>s.dispatch(h)}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(lt))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();new RegExp("^[a-zA-Z0-9_]+$");let ft=(()=>{class t{constructor(e,s,o,i,u,p,h){this._injector=e,this._config=s,this._parentFactory=o,this._actions=i,this._actionResults=u,this._stateContextFactory=p,this._initialState=h,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=function M(t,n=T){let e=null,s=null;function o(){return S(n,e,arguments)||(s=t.apply(null,arguments)),e=arguments,s}return o.reset=function(){e=null,s=null},o}(()=>{const D=this;function v(L){const b=D.statePaths[L];return b?Qt(b.split("."),D._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(L){let b=v(L);return b||((...dt)=>(b||(b=v(L)),b?b(...dt):void 0))},getSelectorOptions:L=>Object.assign({},D._config.selectorOptions,L||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(e){let s={};return s=Array.isArray(e)?e.slice():function Pe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(e)?Object.assign({},e):void 0===e?{}:e,s}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(e){const{newStates:s}=this.addToStatesMap(e);if(!s.length)return[];const o=function Te(t){const n=e=>t.find(o=>o===e)[V].name;return t.reduce((e,s)=>{const{name:o,children:i}=s[V];return e[o]=(i||[]).map(n),e},{})}(s),i=function Ie(t){const n=[],e={},s=(o,i=[])=>{Array.isArray(i)||(i=[]),i.push(o),e[o]=!0,t[o].forEach(u=>{e[u]||s(u,i.slice(0))}),n.indexOf(o)<0&&n.push(o)};return Object.keys(t).forEach(o=>s(o)),n.reverse()}(o),u=function xe(t,n={}){const e=(s,o)=>{for(const i in s)if(s.hasOwnProperty(i)&&s[i].indexOf(o)>=0){const u=e(s,i);return null!==u?`${u}.${i}`:i}return null};for(const s in t)if(t.hasOwnProperty(s)){const o=e(t,s);n[s]=o?`${o}.${s}`:s}return n}(o),p=function Ce(t){return t.reduce((n,e)=>(n[e[V].name]=e,n),{})}(s),h=[];for(const D of i){const v=p[D],F=u[D],L=v[V];this.addRuntimeInfoToMeta(L,F);const b={name:D,path:F,isInitialised:!1,actions:L.actions,instance:this._injector.get(v),defaults:t.cloneDefaults(L.defaults)};this.hasBeenMountedAndBootstrapped(D,F)||h.push(b),this.states.push(b)}return h}addAndReturnDefaults(e){const o=this.add(e||[]);return{defaults:o.reduce((u,p)=>Jt(u,p.path,p.defaults),{}),states:o}}connectActionHandlers(){if(null!==this._actionsSubscription)return;const e=new A.x;this._actionsSubscription=this._actions.pipe((0,d.h)(s=>"DISPATCHED"===s.status),(0,tt.z)(s=>{e.next(s);const o=s.action;return this.invokeActions(e,o).pipe((0,c.U)(()=>({action:o,status:"SUCCESSFUL"})),Kt({action:o,status:"CANCELED"}),(0,Wt.K)(i=>N({action:o,status:"ERRORED",error:i})))})).subscribe(s=>this._actionResults.next(s))}invokeActions(e,s){const o=at(s),i=[];for(const u of this.states){const p=u.actions[o];if(p)for(const h of p){const D=this._stateContextFactory.createStateContext(u);try{let v=u.instance[h.fn](D,s);v instanceof Promise&&(v=(0,x.D)(v)),v instanceof m.y?(v=v.pipe((0,tt.z)(F=>F instanceof Promise?(0,x.D)(F):F instanceof m.y?F:N(F)),Kt({})),h.options.cancelUncompleted&&(v=v.pipe(ae(e.pipe(Fe(s)))))):v=N({}).pipe(O()),i.push(v)}catch(v){i.push(ot(v))}}}return i.length||i.push(N({})),st(i)}addToStatesMap(e){const s=[],o=this.statesByName;for(const i of e){const u=ct(i).name;!o[u]&&(s.push(i),o[u]=i)}return{newStates:s}}addRuntimeInfoToMeta(e,s){this.statePaths[e.name]=s,e.path=s}hasBeenMountedAndBootstrapped(e,s){const o=void 0!==At(this._initialState,s);return this.statesByName[e]&&o}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3),r.LFG(it),r.LFG(t,12),r.LFG(Ct),r.LFG(jt),r.LFG(It),r.LFG(G,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ht=(()=>{class t{constructor(e,s,o){this.internalStateOperations=e,this.stateContextFactory=s,this.bootstrapper=o}ngxsBootstrap(e,s){this.internalStateOperations.getRootStateOperations().dispatch(e).pipe((0,d.h)(()=>!!s),(0,ce.b)(()=>this.invokeInit(s.states)),(0,tt.z)(()=>this.bootstrapper.appBootstrapped$),(0,d.h)(o=>!!o)).subscribe(()=>this.invokeBootstrap(s.states))}invokeInit(e){for(const s of e){const o=s.instance;if(o.ngxsOnChanges){const p=qt(s,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});o.ngxsOnChanges(p)}o.ngxsOnInit&&o.ngxsOnInit(this.getStateContext(s)),s.isInitialised=!0}}invokeBootstrap(e){for(const s of e){const o=s.instance;o.ngxsAfterBootstrap&&o.ngxsAfterBootstrap(this.getStateContext(s))}}getStateContext(e){return this.stateContextFactory.createStateContext(e)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(lt),r.LFG(It),r.LFG(g))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();let yt=(()=>{class t{constructor(e,s,o,i,u,p){this._stateStream=e,this._internalStateOperations=s,this._config=o,this._internalExecutionStrategy=i,this._stateFactory=u,this._selectableStateStream=this._stateStream.pipe((0,ue.Q)(Dt),St(this._internalExecutionStrategy),O({bufferSize:1,refCount:!0})),this.initStateStream(p)}dispatch(e){return this._internalStateOperations.getRootStateOperations().dispatch(e)}select(e){const s=this.getStoreBoundSelectorFn(e);return this._selectableStateStream.pipe((0,c.U)(s),(0,Wt.K)(o=>{const{suppressErrors:i}=this._config.selectorOptions;return o instanceof TypeError&&i?N(void 0):ot(o)}),function fe(t,n=le.y){return t=t??de,(0,_.e)((e,s)=>{let o,i=!0;e.subscribe((0,H.x)(s,u=>{const p=n(u);(i||!t(o,p))&&(i=!1,o=p,s.next(u))}))})}(),St(this._internalExecutionStrategy))}selectOnce(e){return this.select(e).pipe(C(1))}selectSnapshot(e){return this.getStoreBoundSelectorFn(e)(this._stateStream.getValue())}subscribe(e){return this._selectableStateStream.pipe(St(this._internalExecutionStrategy)).subscribe(e)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(e){return this._internalStateOperations.getRootStateOperations().setState(e)}getStoreBoundSelectorFn(e){return function oe(t){const n=function zt(t){return t.NGXS_SELECTOR_META}(t)||ct(t);return n&&n.makeRootSelector||(()=>t)}(e)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(e){const s=this._stateStream.value;if(!s||0===Object.keys(s).length){const u=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,e):e;this._stateStream.next(u)}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xt),r.LFG(lt),r.LFG(it),r.LFG(Tt),r.LFG(ft),r.LFG(G,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),vt=(()=>{class t{constructor(e,s){t.store=e,t.config=s}ngOnDestroy(){t.store=null,t.config=null}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yt),r.LFG(it))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t.store=null,t.config=null,t})();class re{static get type(){return"@@INIT"}}class $e{constructor(n){this.addedStates=n}static get type(){return"@@UPDATE_STATE"}}let Ye=(()=>{class t{constructor(e,s,o,i,u=[],p){const h=e.addAndReturnDefaults(u);s.setStateToTheCurrentWithNew(h),e.connectActionHandlers(),p.ngxsBootstrap(new re,h)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ft),r.LFG(lt),r.LFG(yt),r.LFG(vt),r.LFG($t,8),r.LFG(Ht))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),Ve=(()=>{class t{constructor(e,s,o,i=[],u){const p=t.flattenStates(i),h=o.addAndReturnDefaults(p);h.states.length&&(s.setStateToTheCurrentWithNew(h),u.ngxsBootstrap(new $e(h.defaults),h))}static flattenStates(e=[]){return e.reduce((s,o)=>s.concat(o),[])}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yt),r.LFG(lt),r.LFG(ft),r.LFG(Yt,8),r.LFG(Ht))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();class U{static forRoot(n=[],e={}){return{ngModule:Ye,providers:[ft,It,Ue,Ct,g,Ht,ee,jt,lt,Tt,yt,xt,vt,kt,...n,...U.ngxsTokenProviders(n,e)]}}static forFeature(n=[]){return{ngModule:Ve,providers:[ft,kt,...n,{provide:Yt,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,e){return[{provide:Zt,useValue:e.executionStrategy},{provide:$t,useValue:n},{provide:U.ROOT_OPTIONS,useValue:e},{provide:it,useFactory:U.ngxsConfigFactory,deps:[U.ROOT_OPTIONS]},{provide:r.tb,useFactory:U.appBootstrapListenerFactory,multi:!0,deps:[g]},{provide:G,useFactory:U.getInitialState},{provide:Y,useExisting:It},{provide:k,useExisting:ft}]}static ngxsConfigFactory(n){return Gt(new it,n)}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}static getInitialState(){return z.pop()}}function Xe(t,n){return(e,s)=>{const o=Ut(e.constructor);Array.isArray(t)||(t=[t]);for(const i of t){const u=i.type;o.actions[u]||(o.actions[u]=[]),o.actions[u].push({fn:s,options:n||{},type:u})}}}function Ze(t){return s=>{const o=s,i=Ut(o),u=Object.getPrototypeOf(o),p=function n(s){return Object.assign({},s[Xt]||{},t)}(u);(function e(s){const{meta:o,inheritedStateClass:i,optionsWithInheritance:u}=s,{children:p,defaults:h,name:D}=u,v="string"==typeof D?D:D&&D.getName()||null;i.hasOwnProperty(V)&&(o.actions=Object.assign({},o.actions,(i[V]||{}).actions)),o.children=p,o.defaults=h,o.name=v})({meta:i,inheritedStateClass:u,optionsWithInheritance:p}),o[Xt]=p}}function en(t,...n){return function(e,s){const o=s.toString(),i=`__${o}__selector`,u=function qe(t,n,e=[]){return n=n||function tn(t){const n=t.length-1;return 36===t.charCodeAt(n)?t.slice(0,n):t}(t),"string"==typeof n?Qt(e.length?[n,...e]:n.split("."),vt.config):n}(o,t,n);Object.defineProperties(e,{[i]:{writable:!0,enumerable:!1,configurable:!0},[o]:{enumerable:!0,configurable:!0,get(){return this[i]||(this[i]=function Qe(t){return vt.store||function me(){throw new Error("You have forgotten to import the NGXS module!")}(),vt.store.select(t)}(u))}}})}}U.\u0275fac=function(n){return new(n||U)},U.\u0275mod=r.oAB({type:U}),U.\u0275inj=r.cJS({}),U.ROOT_OPTIONS=new r.OlP("ROOT_OPTIONS")},262:($,R,l)=>{l.d(R,{K:()=>y});var r=l(8421),A=l(5403),I=l(4482);function y(P){return(0,I.e)((g,T)=>{let G,S=null,M=!1;S=g.subscribe((0,A.x)(T,void 0,void 0,z=>{G=(0,r.Xf)(P(z,y(P)(g))),S?(S.unsubscribe(),S=null,G.subscribe(T)):M=!0})),M&&(S.unsubscribe(),S=null,G.subscribe(T))})}},9300:($,R,l)=>{l.d(R,{h:()=>I});var r=l(4482),A=l(5403);function I(y,P){return(0,r.e)((g,T)=>{let S=0;g.subscribe((0,A.x)(T,M=>y.call(P,M,S++)&&T.next(M)))})}},8505:($,R,l)=>{l.d(R,{b:()=>P});var r=l(576),A=l(4482),I=l(5403),y=l(4671);function P(g,T,S){const M=(0,r.m)(g)||T||S?{next:g,error:T,complete:S}:g;return M?(0,A.e)((G,z)=>{var Y;null===(Y=M.subscribe)||void 0===Y||Y.call(M);let k=!0;G.subscribe((0,I.x)(z,w=>{var m;null===(m=M.next)||void 0===m||m.call(M,w),z.next(w)},()=>{var w;k=!1,null===(w=M.complete)||void 0===w||w.call(M),z.complete()},w=>{var m;k=!1,null===(m=M.error)||void 0===m||m.call(M,w),z.error(w)},()=>{var w,m;k&&(null===(w=M.unsubscribe)||void 0===w||w.call(M)),null===(m=M.finalize)||void 0===m||m.call(M)}))}):y.y}},3268:($,R,l)=>{l.d(R,{Z:()=>y});var r=l(4004);const{isArray:A}=Array;function y(P){return(0,r.U)(g=>function I(P,g){return A(g)?P(...g):P(g)}(P,g))}},329:($,R,l)=>{l.d(R,{_F:()=>H,yz:()=>Q,KA:()=>Dt});var r=l(2717),A=l(8995),I=l(515),y=l(8421),P=l(8306),g=l(5577),T=l(1144),S=l(576),M=l(3268);const G=["addListener","removeListener"],z=["addEventListener","removeEventListener"],Y=["on","off"];function k(a,d,c,f){if((0,S.m)(c)&&(f=c,c=void 0),f)return k(a,d,c).pipe((0,M.Z)(f));const[O,_]=function E(a){return(0,S.m)(a.addEventListener)&&(0,S.m)(a.removeEventListener)}(a)?z.map(C=>K=>a[C](d,K,c)):function m(a){return(0,S.m)(a.addListener)&&(0,S.m)(a.removeListener)}(a)?G.map(w(a,d)):function et(a){return(0,S.m)(a.on)&&(0,S.m)(a.off)}(a)?Y.map(w(a,d)):[];if(!O&&(0,T.z)(a))return(0,g.z)(C=>k(C,d,c))((0,y.Xf)(a));if(!O)throw new TypeError("Invalid event target");return new P.y(C=>{const K=(...tt)=>C.next(1<tt.length?tt:tt[0]);return O(K),()=>_(K)})}function w(a,d){return c=>f=>a[c](d,f)}var x=l(9300),N=l(4004),j=l(7579);const B="GET_STORE",nt="STORE_UPATE",ht="ACTION_DISPATCHED",mt=new r.OlP("BROADCAST_CHANNEL_NAME");class Z{}const J=new r.OlP("ALLOWED_ORIGIN"),H=new r.OlP("KNOWN_ACTION");function st(a,d,c=new Set){if("object"==typeof a&&null!==a){if(c.has(a))throw console.error("Found cycle in object tree. Cycle detected in",a),new Error("Object cycle detected");c.add(a)}return a===d?{result:a,equal:!0}:a instanceof Array&&d instanceof Array?function Ft(a,d,c){let f=0,O=[],_=!0;for(;f<a.length&&f<d.length;f++){const C=st(a[f],d[f],c);O.push(C.result),_&&(_=C.equal)}for(;f<d.length;f++)_=!1,O.push(d[f]);return _?{result:a,equal:_}:{result:O,equal:_}}(a,d,c):a&&d&&"object"==typeof a&&"object"==typeof d?function wt(a,d,c){const f={};let O=!0;const _=new Set;for(const C in a)if(Object.prototype.hasOwnProperty.call(a,C))if(_.add(C),Object.prototype.hasOwnProperty.call(d,C)){let K=st(a[C],d[C],c);f[C]=K.result,O&&(O=K.equal)}else O=!1;for(const C in d)Object.prototype.hasOwnProperty.call(d,C)&&!_.has(C)&&(O=!1,f[C]=d[C]);return O?{result:a,equal:O}:{result:f,equal:O}}(a,d,c):{result:d,equal:!1}}function Ot(a){if("string"==typeof a?.data?.type){switch(a.data.type){case ht:case B:case nt:break;default:console.warn("Unknown message type.",a.data)}return!0}return console.warn("Invalid message event",a),!1}let ot=(()=>{class a{constructor(c){this.payload=c}}return a.type="@@MESSAGE",a})(),pt=(()=>{class a{constructor(c,f){this.commsService=c,this.store=f,this.init=()=>{this.subscription&&(console.warn("ChildHandler is already initiated, will re-initiate"),this.subscription.unsubscribe()),this.subscription=this.commsService.messages$.subscribe(O=>{O.type===nt&&this.store.dispatch(new ot(O.payload))}),this.commsService.postMessage({type:B})}}ngOnDestroy(){this.subscription?.unsubscribe()}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(Z),r.LFG(A.yh))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})(),Nt=(()=>{class a{constructor(c){this.commsService=c}handle(c,f,O){if(f instanceof A.XP)return O(c,f);if(f instanceof ot){const{result:_,equal:C}=st(c,f.payload);if(!C)return O(_,f)}else this.commsService.postMessage({type:ht,actionType:f.constructor?.type,action:f});return I.E}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(Z))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})(),Et=(()=>{class a{constructor(c,f,O){this.store=c,this.commsService=f,this.subscriptions=[],this.init=()=>{if(this.subscriptions.length)for(console.warn("HostHandler is already initiated, will re-initiate");this.subscriptions.length;)this.subscriptions.pop()?.unsubscribe();this.subscriptions.push(this.commsService.messages$.subscribe(_=>{switch(_.type){case ht:this.onActionDispatched(_.actionType,_.action);break;case B:this.onGetStore()}})),this.subscriptions.push(this.store.subscribe(_=>{this.commsService.postMessage({type:nt,payload:_})}))},this.knownActions=new Map(O?.flat().map(_=>[_.type,_]))}onGetStore(){this.commsService.postMessage({type:nt,payload:this.store.snapshot()})}onActionDispatched(c,f){var O;if(c){const _=this.knownActions.get(c),C=_?Object.create(_.prototype):new((O=class{}).type=c,O);this.store.dispatch(Object.assign(C,f))}else this.store.dispatch(f)}ngOnDestroy(){for(const c of this.subscriptions)c.unsubscribe()}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(A.yh),r.LFG(Z),r.LFG(H,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})(),rt=(()=>{class a{constructor(c){this.channel=new BroadcastChannel(c),this.messages$=k(this.channel,"message").pipe((0,x.h)(Ot),(0,N.U)(f=>f.data))}postMessage(c){this.channel.postMessage(c)}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(mt))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})();const gt="PORT_SETUP",Mt="PORT_TEARDOWN";let Q=(()=>{class a{constructor(){this.$messages=new j.x,this.ports=new Map,this.messages$=this.$messages.asObservable(),this.eventSourcesChanged=new r.vpe,this.handleMessage=c=>{if(c.data===Mt){const f=c.source??c.target;f&&(this.ports.delete(f),f.removeEventListener("message",this.handleMessage),f.close())}else Ot(c)&&this.$messages.next(c.data)},window.addEventListener("unload",()=>this.ngOnDestroy(!1))}get eventSources(){return this.ports.values()}addPort(c,f){this.ports.set(c,f),this.eventSourcesChanged.emit(),c.addEventListener("message",this.handleMessage),c.start()}removePort(c,f=!0){c.postMessage(Mt),c.removeEventListener("message",this.handleMessage),c.close(),f&&(this.ports.delete(c),this.eventSourcesChanged.emit())}ngOnDestroy(c=!0){for(const f of this.ports.keys())this.removePort(f,!1);c&&this.ports.clear(),this.$messages.complete()}postMessage(c){for(const f of this.ports.keys())f.postMessage(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})(),q=(()=>{class a extends Q{constructor(c){super(),c??(c=location.origin);const f=new MessageChannel;if(window.opener)this.addPort(f.port1,window.opener),window.opener.postMessage(gt,c,[f.port2]);else{if(window.parent===window)throw new Error("Unable to connect to store host");this.addPort(f.port1,window.parent),window.parent.postMessage(gt,c,[f.port2])}}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(J,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})(),Rt=(()=>{class a extends Q{constructor(c){super(),c??(c=location.origin);const f=new Set("string"==typeof c?[c]:c.flat());window.addEventListener("message",O=>{!f.has("*")&&!f.has(O.origin)||O.data===gt&&this.addPort(O.ports[0],O.source)})}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(J,8))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a})();function _t(a,d){const c=[];return a?c.push(Et):c.push(pt,{provide:A.fN,useClass:Nt,multi:!0}),d?.knownActions instanceof Array&&c.push({provide:H,useValue:d.knownActions,multi:!0}),"broadcast"===d?.messageHandler?c.push({provide:Z,useClass:rt},{provide:mt,useValue:d.broadcastChannelName??"NGXS Messages"}):typeof d?.messageHandler>"u"||"port"===d.messageHandler?(c.push({provide:Q,useClass:a?Rt:q},{provide:Z,useExisting:Q}),d?.origin&&c.push({provide:J,useValue:d.origin})):c.push({provide:Z,useExisting:d.messageHandler}),{ngModule:Dt,providers:c}}let Dt=(()=>{class a{constructor(c,f){c?.init()??f?.init()}static forChild(c){return _t(!1,c)}static forRoot(c){return _t(!0,c)}}return a.\u0275fac=function(c){return new(c||a)(r.LFG(Et,8),r.LFG(pt,8))},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({}),a})()}}]);