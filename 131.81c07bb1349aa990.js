"use strict";(self.webpackChunktestapp=self.webpackChunktestapp||[]).push([[131],{2377:($,b,f)=>{f.d(b,{s:()=>S});var s=f(1635),E=f(1988),x=f(2567),y=f(656),A=f(177);class S{constructor(D){this.store=D}increment(){this.store.dispatch(new x.GF)}decrement(){this.store.dispatch(new x.Y_)}static{this.\u0275fac=function(v){return new(v||S)(y.rXU(E.il))}}static{this.\u0275cmp=y.VBU({type:S,selectors:[["app-counter"]],decls:7,vars:3,consts:[[3,"click"]],template:function(v,m){1&v&&(y.j41(0,"p"),y.EFF(1),y.nI1(2,"async"),y.k0s(),y.j41(3,"button",0),y.bIt("click",function(){return m.increment()}),y.EFF(4,"Increment"),y.k0s(),y.j41(5,"button",0),y.bIt("click",function(){return m.decrement()}),y.EFF(6,"Decrement"),y.k0s()),2&v&&(y.R7$(1),y.SpI("counter works! the count is ",y.bMT(2,1,m.count$),""))},dependencies:[A.Jj]})}}(0,s.Cg)([(0,E.l6)(x.Mj)],S.prototype,"count$",void 0)},9836:($,b,f)=>{f.d(b,{f:()=>A});var s=f(177),E=f(1128),x=f(2567),y=f(656);let A=(()=>{class S{static{this.\u0275fac=function(v){return new(v||S)}}static{this.\u0275mod=y.$C({type:S})}static{this.\u0275inj=y.G2t({providers:[{provide:E.Ep,useValue:[x.GF,x.Y_],multi:!0}],imports:[s.MD]})}}return S})()},2567:($,b,f)=>{f.d(b,{GF:()=>y,Mj:()=>S,Y_:()=>A});var s=f(1635),E=f(1988),x=f(656);let y=(()=>{class P{static{this.type="[Counter] Increment"}}return P})(),A=(()=>{class P{static{this.type="[Counter] Decrement"}}return P})(),S=class jt{change(D,v){v instanceof y?D.setState(D.getState()+1):v instanceof A&&D.setState(D.getState()-1)}static{this.\u0275fac=function(v){return new(v||jt)}}static{this.\u0275prov=x.jDH({token:jt,factory:jt.\u0275fac})}};(0,s.Cg)([(0,E.rc)([y,A])],S.prototype,"change",null),S=(0,s.Cg)([(0,E.Uw)({name:"counter",defaults:0})],S)},3408:($,b,f)=>{f.d(b,{ow:()=>v});var s=f(656),E=f(1988),x=f(9437),y=f(8141);const A=new s.nKC("NGXS_DEVTOOLS_OPTIONS");let S=(()=>{class m{constructor(O,I,M){this._options=O,this._injector=I,this._ngZone=M,this.devtoolsExtension=null,this.globalDevtools=s.JZv.__REDUX_DEVTOOLS_EXTENSION__||s.JZv.devToolsExtension,this.unsubscribe=null,this.connect()}ngOnDestroy(){null!==this.unsubscribe&&this.unsubscribe(),this.globalDevtools&&this.globalDevtools.disconnect()}get store(){return this._injector.get(E.il)}handle(O,I,M){return!this.devtoolsExtension||this._options.disabled?M(O,I):M(O,I).pipe((0,x.W)(w=>{const j=this.store.snapshot();throw this.sendToDevTools(O,I,j),w}),(0,y.M)(w=>{this.sendToDevTools(O,I,w)}))}sendToDevTools(O,I,M){const w=(0,E.Ak)(I);w===E.OU.type?this.devtoolsExtension.init(O):this.devtoolsExtension.send(Object.assign(Object.assign({},I),{action:null,type:w}),M)}dispatched(O){if("DISPATCH"===O.type){if("JUMP_TO_ACTION"===O.payload.type||"JUMP_TO_STATE"===O.payload.type){const I=JSON.parse(O.state);I.router&&I.router.trigger&&(I.router.trigger="devtools"),this.store.reset(I)}else if("TOGGLE_ACTION"===O.payload.type)console.warn("Skip is not supported at this time.");else if("IMPORT_STATE"===O.payload.type){const{actionsById:I,computedStates:M,currentStateIndex:w}=O.payload.nextLiftedState;this.devtoolsExtension.init(M[0].state),Object.keys(I).filter(j=>"0"!==j).forEach(j=>this.devtoolsExtension.send(I[j],M[j].state)),this.store.reset(M[w].state)}}else if("ACTION"===O.type){const I=JSON.parse(O.payload);this.store.dispatch(I)}}connect(){!this.globalDevtools||this._options.disabled||(this.devtoolsExtension=this._ngZone.runOutsideAngular(()=>this.globalDevtools.connect(this._options)),this.unsubscribe=this.devtoolsExtension.subscribe(O=>{("DISPATCH"===O.type||"ACTION"===O.type)&&this.dispatched(O)}))}}return m.\u0275fac=function(O){return new(O||m)(s.KVO(A),s.KVO(s.zZn),s.KVO(s.SKi))},m.\u0275prov=s.jDH({token:m,factory:m.\u0275fac}),m})();function P(m){return Object.assign({name:"NGXS"},m)}const D=new s.nKC("USER_OPTIONS");let v=(()=>{class m{static forRoot(O){return{ngModule:m,providers:[{provide:E.qu,useClass:S,multi:!0},{provide:D,useValue:O},{provide:A,useFactory:P,deps:[D]}]}}}return m.\u0275fac=function(O){return new(O||m)},m.\u0275mod=s.$C({type:m}),m.\u0275inj=s.G2t({}),m})()},1988:($,b,f)=>{f.d(b,{rc:()=>vn,OU:()=>oe,qu:()=>pe,rK:()=>yn,l6:()=>Tn,Uw:()=>Sn,il:()=>Et,Ak:()=>i});var s=f(656),E=f(1413),x=f(6129);class y extends E.B{constructor(r=1/0,e=1/0,n=x.U){super(),this._bufferSize=r,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,e)}next(r){const{isStopped:e,_buffer:n,_infiniteTimeWindow:o,_timestampProvider:a,_windowTime:d}=this;e||(n.push(r),!o&&n.push(a.now()+d)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(r),{_infiniteTimeWindow:n,_buffer:o}=this,a=o.slice();for(let d=0;d<a.length&&!r.closed;d+=n?1:2)r.next(a[d]);return this._checkFinalizedStatuses(r),e}_trimBuffer(){const{_bufferSize:r,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:o}=this,a=(o?1:2)*r;if(r<1/0&&a<n.length&&n.splice(0,n.length-a),!o){const d=e.now();let h=0;for(let T=1;T<n.length&&n[T]<=d;T+=2)h=T;h&&n.splice(0,h+1)}}}let A=(()=>{class t{constructor(){this.bootstrap$=new y(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function S(t,r){return t===r}let v=(()=>{class t{static set(e){this._value=e}static pop(){const e=this._value;return this._value={},e}}return t._value={},t})();const m=new s.nKC("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>v.pop()}),F=new s.nKC("\u0275NGXS_STATE_FACTORY"),O=new s.nKC("\u0275NGXS_STATE_CONTEXT_FACTORY");var I=f(177),M=f(4226),w=f(4412),j=f(7673);const{isArray:Ut}=Array,{getPrototypeOf:Lt,prototype:lt,keys:Mt}=Object;var et=f(8750),B=f(3794),k=f(4360),Ht=f(6450);function Gt(t,r){return t.reduce((e,n,o)=>(e[n]=r[o],e),{})}function _t(...t){const r=(0,B.ms)(t),{args:e,keys:n}=function Bt(t){if(1===t.length){const r=t[0];if(Ut(r))return{args:r,keys:null};if(function $t(t){return t&&"object"==typeof t&&Lt(t)===lt}(r)){const e=Mt(r);return{args:e.map(n=>r[n]),keys:e}}}return{args:t,keys:null}}(t),o=new M.c(a=>{const{length:d}=e;if(!d)return void a.complete();const h=new Array(d);let T=d,K=d;for(let L=0;L<d;L++){let R=!1;(0,et.Tg)(e[L]).subscribe((0,k._)(a,V=>{R||(R=!0,K--),h[L]=V},()=>T--,void 0,()=>{(!T||!R)&&(K||a.next(n?Gt(n,h):h),a.complete())}))}});return r?o.pipe((0,Ht.I)(r)):o}var Y=f(8071);function nt(t,r){const e=(0,Y.T)(t)?t:()=>t,n=o=>o.error(e());return new M.c(r?o=>r.schedule(n,0,o):n)}var dt=f(983),ft=f(6648);function Tt(t){return!!t&&(t instanceof M.c||(0,Y.T)(t.lift)&&(0,Y.T)(t.subscribe))}var J=f(5964),Z=f(6354),pt=f(7647);function z(t,r,e){let n,o=!1;return t&&"object"==typeof t?({bufferSize:n=1/0,windowTime:r=1/0,refCount:o=!1,scheduler:e}=t):n=t??1/0,(0,pt.u)({connector:()=>new y(n,r,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var H=f(9974);function ht(t){return t<=0?()=>dt.w:(0,H.N)((r,e)=>{let n=0;r.subscribe((0,k._)(e,o=>{++n<=t&&(e.next(o),t<=n&&e.complete())}))})}function gt(t,r){return r?e=>e.pipe(gt((n,o)=>(0,et.Tg)(t(n,o)).pipe((0,Z.T)((a,d)=>r(n,a,o,d))))):(0,H.N)((e,n)=>{let o=0,a=null,d=!1;e.subscribe((0,k._)(n,h=>{a||(a=(0,k._)(n,void 0,()=>{a=null,d&&n.complete()}),(0,et.Tg)(t(h,o++)).subscribe(a))},()=>{d=!0,!a&&n.complete()}))})}var G=f(1397);function rt(t){return(0,H.N)((r,e)=>{let n=!1;r.subscribe((0,k._)(e,o=>{n=!0,e.next(o)},()=>{n||e.next(t),e.complete()}))})}var Q=f(9437),kt=f(5343);function ot(t){return(0,H.N)((r,e)=>{(0,et.Tg)(t).subscribe((0,k._)(e,()=>e.complete(),kt.l)),!e.closed&&r.subscribe(e)})}var Wt=f(3294),At=f(8141),Xt=f(6365);function yt(...t){return function Zt(){return(0,Xt.U)(1)}()((0,ft.H)(t,(0,B.lI)(t)))}function It(...t){const r=(0,B.lI)(t);return(0,H.N)((e,n)=>{(r?yt(t,e,r):yt(t,e)).subscribe(n)})}function i(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const c=(t,r,e)=>{t=Object.assign({},t);const n=r.split("."),o=n.length-1;return n.reduce((a,d,h)=>(a[d]=h===o?e:Array.isArray(a[d])?a[d].slice():Object.assign({},a[d]),a&&a[d]),t),t},u=(t,r)=>r.split(".").reduce((e,n)=>e&&e[n],t),p=t=>t&&"object"==typeof t&&!Array.isArray(t),g=(t,...r)=>{if(!r.length)return t;const e=r.shift();if(p(t)&&p(e))for(const n in e)p(e[n])?(t[n]||Object.assign(t,{[n]:{}}),g(t[n],e[n])):Object.assign(t,{[n]:e[n]});return g(t,...r)};let ue=(()=>{class t{constructor(e,n){this._ngZone=e,this._platformId=n}enter(e){return(0,I.Vy)(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return s.SKi.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return s.SKi.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(s.SKi),s.KVO(s.Agw))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const le=new s.nKC("ROOT_OPTIONS"),de=new s.nKC("ROOT_STATE_TOKEN"),fe=new s.nKC("FEATURE_STATE_TOKEN"),pe=new s.nKC("NGXS_PLUGINS"),X="NGXS_META",he="NGXS_OPTIONS_META",Qt="NGXS_SELECTOR_META";let xt=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=ue}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.jDH({token:t,factory:function(e){let n=null;return e?n=new e:(o=s.KVO(le),n=g(new t,o)),n;var o},providedIn:"root"}),t})();class Re{constructor(r,e,n){this.previousValue=r,this.currentValue=e,this.firstChange=n}}let Fe=(()=>{class t{enter(e){return e()}leave(e){return e()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ge=new s.nKC("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),Ke=new s.nKC("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=(0,s.WQX)(s.duS),r=t.get(ge);return t.get(r||(typeof s.JZv.Zone<"u"?ue:Fe))}});function qt(t){if(!t.hasOwnProperty(X)){const r={name:null,actions:{},defaults:{},path:null,makeRootSelector:e=>e.getStateGetter(r.name),children:[]};Object.defineProperty(t,X,{value:r})}return tt(t)}function tt(t){return t[X]}function ye(t,r){return r&&r.compatibility&&r.compatibility.strictContentSecurityPolicy?function Ve(t){const r=t.slice();return e=>r.reduce((n,o)=>n&&n[o],e)}(t):function je(t){const r=t;let e="store."+r[0],n=0;const o=r.length;let a=e;for(;++n<o;)a=a+" && "+(e=e+"."+r[n]);return new Function("store","return "+a+";")}(t)}function Ge(...t){return function ct(t,r,e=Xe){const n=function Ze(t){return t.reduce((r,e)=>(r[i(e)]=!0,r),{})}(t),o=r&&function ze(t){return t.reduce((r,e)=>(r[e]=!0,r),{})}(r);return function(a){return a.pipe(function ke(t,r){return(0,J.p)(e=>{const n=i(e.action);return t[n]&&(!r||r[e.status])})}(n,o),e())}}(t,["DISPATCHED"])}function Xe(){return(0,Z.T)(t=>t.action)}function bt(t){return r=>new M.c(e=>r.subscribe({next(n){t.leave(()=>e.next(n))},error(n){t.leave(()=>e.error(n))},complete(){t.leave(()=>e.complete())}}))}let ve=(()=>{class t{constructor(e){this._executionStrategy=e}enter(e){return this._executionStrategy.enter(e)}leave(e){return this._executionStrategy.leave(e)}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(Ke))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Se(t){const r=[];let e=!1;return function(...o){if(e)r.unshift(o);else{for(e=!0,t(...o);r.length>0;){const a=r.pop();a&&t(...a)}e=!1}}}class Ye extends E.B{constructor(){super(...arguments),this._orderedNext=Se(r=>super.next(r))}next(r){this._orderedNext(r)}}class Je extends w.t{constructor(r){super(r),this._orderedNext=Se(e=>super.next(e)),this._currentValue=r}getValue(){return this._currentValue}next(r){this._currentValue=r,this._orderedNext(r)}}let Oe=(()=>{class t extends Ye{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=s.xGo(t)))(n||t)}}(),t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const me=t=>(...r)=>t.shift()(...r,(...n)=>me(t)(...n));let Ee=(()=>{class t{constructor(e){this._injector=e,this._errorHandler=null}reportErrorSafely(e){null===this._errorHandler&&(this._errorHandler=this._injector.get(s.zcH));try{this._errorHandler.handleError(e)}catch{}}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(s.zZn))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ee=(()=>{class t extends Je{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ne=(()=>{class t{constructor(e,n){this._parentManager=e,this._pluginHandlers=n,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const e=this.getPluginHandlers();this.rootPlugins.push(...e)}getPluginHandlers(){return(this._pluginHandlers||[]).map(n=>n.handle?n.handle.bind(n):n)}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(t,12),s.KVO(pe,8))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac}),t})(),De=(()=>{class t extends E.B{}return t.\u0275fac=function(){let r;return function(n){return(r||(r=s.xGo(t)))(n||t)}}(),t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qe=(()=>{class t{constructor(e,n,o,a,d,h){this._actions=e,this._actionResults=n,this._pluginManager=o,this._stateStream=a,this._ngxsExecutionStrategy=d,this._internalErrorReporter=h}dispatch(e){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(e)).pipe(function Qe(t,r){return e=>{let n=!1;return e.subscribe({error:o=>{r.enter(()=>Promise.resolve().then(()=>{n||r.leave(()=>t.reportErrorSafely(o))}))}}),new M.c(o=>(n=!0,e.pipe(bt(r)).subscribe(o)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(e){return Array.isArray(e)?0===e.length?(0,j.of)(this._stateStream.getValue()):_t(e.map(n=>this.dispatchSingle(n))):this.dispatchSingle(e)}dispatchSingle(e){const n=this._stateStream.getValue();return me([...this._pluginManager.plugins,(a,d)=>{a!==n&&this._stateStream.next(a);const h=this.getActionResultStream(d);return h.subscribe(T=>this._actions.next(T)),this._actions.next({action:d,status:"DISPATCHED"}),this.createDispatchObservable(h)}])(n,e).pipe(z())}getActionResultStream(e){return this._actionResults.pipe((0,J.p)(n=>n.action===e&&"DISPATCHED"!==n.status),ht(1),z())}createDispatchObservable(e){return e.pipe(gt(n=>{switch(n.status){case"SUCCESSFUL":return(0,j.of)(this._stateStream.getValue());case"ERRORED":return nt(n.error);default:return dt.w}})).pipe(z())}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(Oe),s.KVO(De),s.KVO(ne),s.KVO(ee),s.KVO(ve),s.KVO(Ee))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mt=(()=>{class t{constructor(e,n,o){this._stateStream=e,this._dispatcher=n,this._config=o}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:n=>this._stateStream.next(n),dispatch:n=>this._dispatcher.dispatch(n)}}setStateToTheCurrentWithNew(e){const n=this.getRootStateOperations(),o=n.getState();n.setState(Object.assign(Object.assign({},o),e.defaults))}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(ee),s.KVO(qe),s.KVO(xt))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),re=(()=>{class t{constructor(e){this._internalStateOperations=e}createStateContext(e){const n=this._internalStateOperations.getRootStateOperations();return{getState:()=>Ae(n.getState(),e.path),patchState(o){const a=n.getState(),d=function tn(t){return r=>{const e=Object.assign({},r);for(const n in t)e[n]=t[n];return e}}(o);return Te(n,a,d,e.path)},setState(o){const a=n.getState();return function st(t){return"function"==typeof t}(o)?Te(n,a,o,e.path):_e(n,a,o,e.path)},dispatch:o=>n.dispatch(o)}}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(mt))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _e(t,r,e,n){const o=c(r,n,e);return t.setState(o),o}function Te(t,r,e,n){return _e(t,r,e(Ae(r,n)),n)}function Ae(t,r){return u(t,r)}new RegExp("^[a-zA-Z0-9_]+$");let oe=(()=>{class t{}return t.type="@@INIT",t})(),Ie=(()=>{class t{constructor(e){this.addedStates=e}}return t.type="@@UPDATE_STATE",t})();new s.nKC("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let ut=(()=>{class t{constructor(e,n,o,a,d,h,T){this._injector=e,this._config=n,this._parentFactory=o,this._actions=a,this._actionResults=d,this._stateContextFactory=h,this._initialState=T,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=function D(t,r=S){let e=null,n=null;function o(){return function P(t,r,e){if(null===r||null===e||r.length!==e.length)return!1;const n=r.length;for(let o=0;o<n;o++)if(!t(r[o],e[o]))return!1;return!0}(r,e,arguments)||(n=t.apply(null,arguments)),e=arguments,n}return o.reset=function(){e=null,n=null},o}(()=>{const K=this;function L(V){const U=K.statePaths[V];return U?ye(U.split("."),K._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(V){let U=L(V);return U||((...Nn)=>(U||(U=L(V)),U?U(...Nn):void 0))},getSelectorOptions:V=>Object.assign(Object.assign({},K._config.selectorOptions),V||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(e){let n=e;return Array.isArray(e)?n=e.slice():function He(t){return"object"==typeof t&&null!==t||"function"==typeof t}(e)?n=Object.assign({},e):void 0===e&&(n={}),n}ngOnDestroy(){var e;null===(e=this._actionsSubscription)||void 0===e||e.unsubscribe()}add(e){const{newStates:n}=this.addToStatesMap(e);if(!n.length)return[];const o=function Ue(t){const r=e=>t.find(o=>o===e)[X].name;return t.reduce((e,n)=>{const{name:o,children:a}=n[X];return e[o]=(a||[]).map(r),e},{})}(n),a=function $e(t){const r=[],e={},n=(o,a=[])=>{Array.isArray(a)||(a=[]),a.push(o),e[o]=!0,t[o].forEach(d=>{e[d]||n(d,a.slice(0))}),r.indexOf(o)<0&&r.push(o)};return Object.keys(t).forEach(o=>n(o)),r.reverse()}(o),d=function Be(t,r={}){const e=(n,o)=>{for(const a in n)if(n.hasOwnProperty(a)&&n[a].indexOf(o)>=0){const d=e(n,a);return null!==d?`${d}.${a}`:a}return null};for(const n in t)if(t.hasOwnProperty(n)){const o=e(t,n);r[n]=o?`${o}.${n}`:n}return r}(o),h=function Le(t){return t.reduce((r,e)=>(r[e[X].name]=e,r),{})}(n),T=[];for(const K of a){const L=h[K],R=d[K],V=L[X];this.addRuntimeInfoToMeta(V,R);const U={name:K,path:R,isInitialised:!1,actions:V.actions,instance:this._injector.get(L),defaults:t._cloneDefaults(V.defaults)};this.hasBeenMountedAndBootstrapped(K,R)||T.push(U),this.states.push(U)}return T}addAndReturnDefaults(e){const o=this.add(e||[]);return{defaults:o.reduce((d,h)=>c(d,h.path,h.defaults),{}),states:o}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const e=new E.B;this._actionsSubscription=this._actions.pipe((0,J.p)(n=>"DISPATCHED"===n.status),(0,G.Z)(n=>{e.next(n);const o=n.action;return this.invokeActions(e,o).pipe((0,Z.T)(()=>({action:o,status:"SUCCESSFUL"})),rt({action:o,status:"CANCELED"}),(0,Q.W)(a=>(0,j.of)({action:o,status:"ERRORED",error:a})))})).subscribe(n=>this._actionResults.next(n))}invokeActions(e,n){const o=i(n),a=[];let d=!1;for(const h of this.states){const T=h.actions[o];if(T)for(const K of T){const L=this._stateContextFactory.createStateContext(h);try{let R=h.instance[K.fn](L,n);R instanceof Promise&&(R=(0,ft.H)(R)),Tt(R)?(R=R.pipe((0,G.Z)(V=>V instanceof Promise?(0,ft.H)(V):Tt(V)?V:(0,j.of)(V)),rt({})),K.options.cancelUncompleted&&(R=R.pipe(ot(e.pipe(Ge(n)))))):R=(0,j.of)({}).pipe(z()),a.push(R)}catch(R){a.push(nt(R))}d=!0}}return a.length||a.push((0,j.of)({})),_t(a)}addToStatesMap(e){const n=[],o=this.statesByName;for(const a of e){const d=tt(a).name;!o[d]&&(n.push(a),o[d]=a)}return{newStates:n}}addRuntimeInfoToMeta(e,n){this.statePaths[e.name]=n,e.path=n}hasBeenMountedAndBootstrapped(e,n){const o=void 0!==u(this._initialState,n);return this.statesByName[e]&&o}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(s.zZn),s.KVO(xt),s.KVO(t,12),s.KVO(Oe),s.KVO(De),s.KVO(re),s.KVO(m,8))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac}),t})();function we(t){const r=function Pt(t){return t[Qt]}(t)||tt(t);return r&&r.makeRootSelector||(()=>t)}let Et=(()=>{class t{constructor(e,n,o,a,d,h){this._stateStream=e,this._internalStateOperations=n,this._config=o,this._internalExecutionStrategy=a,this._stateFactory=d,this._selectableStateStream=this._stateStream.pipe(bt(this._internalExecutionStrategy),z({bufferSize:1,refCount:!0})),this.initStateStream(h)}dispatch(e){return this._internalStateOperations.getRootStateOperations().dispatch(e)}select(e){const n=this.getStoreBoundSelectorFn(e);return this._selectableStateStream.pipe((0,Z.T)(n),(0,Q.W)(o=>{const{suppressErrors:a}=this._config.selectorOptions;return o instanceof TypeError&&a?(0,j.of)(void 0):nt(o)}),(0,Wt.F)(),bt(this._internalExecutionStrategy))}selectOnce(e){return this.select(e).pipe(ht(1))}selectSnapshot(e){return this.getStoreBoundSelectorFn(e)(this._stateStream.getValue())}subscribe(e){return this._selectableStateStream.pipe(bt(this._internalExecutionStrategy)).subscribe(e)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(e){return this._internalStateOperations.getRootStateOperations().setState(e)}getStoreBoundSelectorFn(e){return we(e)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(e){const n=this._stateStream.value;if(!n||0===Object.keys(n).length){const d=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),e):e;this._stateStream.next(d)}}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(ee),s.KVO(mt),s.KVO(xt),s.KVO(ve),s.KVO(ut),s.KVO(m,8))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ft=(()=>{class t{constructor(e,n){t.store=e,t.config=n}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(e){return new(e||t)(s.KVO(Et),s.KVO(xt))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ne=(()=>{class t{constructor(e,n,o,a,d){this._store=e,this._internalErrorReporter=n,this._internalStateOperations=o,this._stateContextFactory=a,this._bootstrapper=d,this._destroy$=new E.B}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(e,n){this._internalStateOperations.getRootStateOperations().dispatch(e).pipe((0,J.p)(()=>!!n),(0,At.M)(()=>this._invokeInitOnStates(n.states)),(0,G.Z)(()=>this._bootstrapper.appBootstrapped$),(0,J.p)(o=>!!o),(0,Q.W)(o=>(this._internalErrorReporter.reportErrorSafely(o),dt.w)),ot(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(n.states))}_invokeInitOnStates(e){for(const n of e){const o=n.instance;o.ngxsOnChanges&&this._store.select(a=>u(a,n.path)).pipe(It(void 0),(0,H.N)((t,r)=>{let e,n=!1;t.subscribe((0,k._)(r,o=>{const a=e;e=o,n&&r.next([a,o]),n=!0}))}),ot(this._destroy$)).subscribe(([a,d])=>{const h=new Re(a,d,!n.isInitialised);o.ngxsOnChanges(h)}),o.ngxsOnInit&&o.ngxsOnInit(this._getStateContext(n)),n.isInitialised=!0}}_invokeBootstrapOnStates(e){for(const n of e){const o=n.instance;o.ngxsAfterBootstrap&&o.ngxsAfterBootstrap(this._getStateContext(n))}}_getStateContext(e){return this._stateContextFactory.createStateContext(e)}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(Et),s.KVO(Ee),s.KVO(mt),s.KVO(re),s.KVO(A))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hn=(()=>{class t{constructor(e,n,o,a,d=[],h){const T=e.addAndReturnDefaults(d);n.setStateToTheCurrentWithNew(T),e.connectActionHandlers(),h.ngxsBootstrap(new oe,T)}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(ut),s.KVO(mt),s.KVO(Et),s.KVO(Ft),s.KVO(de,8),s.KVO(Ne))},t.\u0275mod=s.$C({type:t}),t.\u0275inj=s.G2t({}),t})(),gn=(()=>{class t{constructor(e,n,o,a=[],d){const h=t.flattenStates(a),T=o.addAndReturnDefaults(h);T.states.length&&(n.setStateToTheCurrentWithNew(T),d.ngxsBootstrap(new Ie(T.defaults),T))}static flattenStates(e=[]){return e.reduce((n,o)=>n.concat(o),[])}}return t.\u0275fac=function(e){return new(e||t)(s.KVO(Et),s.KVO(mt),s.KVO(ut),s.KVO(fe,8),s.KVO(Ne))},t.\u0275mod=s.$C({type:t}),t.\u0275inj=s.G2t({}),t})(),yn=(()=>{class t{static forRoot(e=[],n={}){return{ngModule:hn,providers:[ut,ne,...e,...t.ngxsTokenProviders(e,n)]}}static forFeature(e=[]){return{ngModule:gn,providers:[ut,ne,...e,{provide:fe,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,n){return[{provide:ge,useValue:n.executionStrategy},{provide:de,useValue:e},{provide:le,useValue:n},{provide:s.iLQ,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[A]},{provide:O,useExisting:re},{provide:F,useExisting:ut}]}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.$C({type:t}),t.\u0275inj=s.G2t({}),t})();function vn(t,r){return(e,n)=>{const o=qt(e.constructor);Array.isArray(t)||(t=[t]);for(const a of t){const d=a.type;o.actions[d]||(o.actions[d]=[]),o.actions[d].push({fn:n,options:r||{},type:d})}}}function Sn(t){return r=>{const e=r,n=qt(e),o=Object.getPrototypeOf(e),a=function On(t,r){return Object.assign(Object.assign({},t[he]||{}),r)}(o,t);(function mn(t){const{meta:r,inheritedStateClass:e,optionsWithInheritance:n}=t,{children:o,defaults:a,name:d}=n,h="string"==typeof d?d:d&&d.getName()||null;if(e.hasOwnProperty(X)){const T=e[X]||{};r.actions=Object.assign(Object.assign({},r.actions),T.actions)}r.children=o,r.defaults=a,r.name=h})({meta:n,inheritedStateClass:o,optionsWithInheritance:a}),e[he]=a}}const En=36;function Tn(t,...r){return function(e,n){const o=n.toString(),a=`__${o}__selector`,d=function Mn(t,r,e=[]){return r=r||function _n(t){const r=t.length-1;return t.charCodeAt(r)===En?t.slice(0,r):t}(t),"string"==typeof r?ye(e.length?[r,...e]:r.split("."),Ft.config):r}(o,t,r);Object.defineProperties(e,{[a]:{writable:!0,enumerable:!1,configurable:!0},[o]:{enumerable:!0,configurable:!0,get(){return this[a]||(this[a]=function Dn(t){return Ft.store||function be(){throw new Error("You have forgotten to import the NGXS module!")}(),Ft.store.select(t)}(d))}}})}}},9437:($,b,f)=>{f.d(b,{W:()=>y});var s=f(8750),E=f(4360),x=f(9974);function y(A){return(0,x.N)((S,P)=>{let m,D=null,v=!1;D=S.subscribe((0,E._)(P,void 0,void 0,F=>{m=(0,s.Tg)(A(F,y(A)(S))),D?(D.unsubscribe(),D=null,m.subscribe(P)):v=!0})),v&&(D.unsubscribe(),D=null,m.subscribe(P))})}},5964:($,b,f)=>{f.d(b,{p:()=>x});var s=f(9974),E=f(4360);function x(y,A){return(0,s.N)((S,P)=>{let D=0;S.subscribe((0,E._)(P,v=>y.call(A,v,D++)&&P.next(v)))})}},8141:($,b,f)=>{f.d(b,{M:()=>A});var s=f(8071),E=f(9974),x=f(4360),y=f(3669);function A(S,P,D){const v=(0,s.T)(S)||P||D?{next:S,error:P,complete:D}:S;return v?(0,E.N)((m,F)=>{var O;null===(O=v.subscribe)||void 0===O||O.call(v);let I=!0;m.subscribe((0,x._)(F,M=>{var w;null===(w=v.next)||void 0===w||w.call(v,M),F.next(M)},()=>{var M;I=!1,null===(M=v.complete)||void 0===M||M.call(v),F.complete()},M=>{var w;I=!1,null===(w=v.error)||void 0===w||w.call(v,M),F.error(M)},()=>{var M,w;I&&(null===(M=v.unsubscribe)||void 0===M||M.call(v)),null===(w=v.finalize)||void 0===w||w.call(v)}))}):y.D}},6129:($,b,f)=>{f.d(b,{U:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},6450:($,b,f)=>{f.d(b,{I:()=>y});var s=f(6354);const{isArray:E}=Array;function y(A){return(0,s.T)(S=>function x(A,S){return E(S)?A(...S):A(S)}(A,S))}},1128:($,b,f)=>{f.d(b,{Ep:()=>Q,M:()=>at,RG:()=>Jt});var s=f(656),E=f(1988),x=f(983),y=f(4226),A=f(8359);class S extends A.yU{constructor(l,c){super()}schedule(l,c=0){return this}}const P={setInterval(i,l,...c){const{delegate:u}=P;return u?.setInterval?u.setInterval(i,l,...c):setInterval(i,l,...c)},clearInterval(i){const{delegate:l}=P;return(l?.clearInterval||clearInterval)(i)},delegate:void 0};var D=f(7908),m=f(6129);class F{constructor(l,c=F.now){this.schedulerActionCtor=l,this.now=c}schedule(l,c=0,u){return new this.schedulerActionCtor(this,l).schedule(u,c)}}F.now=m.U.now;const I=new class O extends F{constructor(l,c=F.now){super(l,c),this.actions=[],this._active=!1}flush(l){const{actions:c}=this;if(this._active)return void c.push(l);let u;this._active=!0;do{if(u=l.execute(l.state,l.delay))break}while(l=c.shift());if(this._active=!1,u){for(;l=c.shift();)l.unsubscribe();throw u}}}(class v extends S{constructor(l,c){super(l,c),this.scheduler=l,this.work=c,this.pending=!1}schedule(l,c=0){var u;if(this.closed)return this;this.state=l;const p=this.id,g=this.scheduler;return null!=p&&(this.id=this.recycleAsyncId(g,p,c)),this.pending=!0,this.delay=c,this.id=null!==(u=this.id)&&void 0!==u?u:this.requestAsyncId(g,this.id,c),this}requestAsyncId(l,c,u=0){return P.setInterval(l.flush.bind(l,this),u)}recycleAsyncId(l,c,u=0){if(null!=u&&this.delay===u&&!1===this.pending)return c;null!=c&&P.clearInterval(c)}execute(l,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const u=this._execute(l,c);if(u)return u;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,c){let p,u=!1;try{this.work(l)}catch(g){u=!0,p=g||new Error("Scheduled action threw falsy error")}if(u)return this.unsubscribe(),p}unsubscribe(){if(!this.closed){const{id:l,scheduler:c}=this,{actions:u}=c;this.work=this.state=this.scheduler=null,this.pending=!1,(0,D.o)(u,this),null!=l&&(this.id=this.recycleAsyncId(c,l,null)),this.delay=null,super.unsubscribe()}}});var w=f(9974),j=f(4360),Lt=f(8141),lt=f(6354),Mt=f(5964),Bt=f(8750),$t=f(1397),et=f(7441),B=f(8071),k=f(6450);const Ht=["addListener","removeListener"],Gt=["addEventListener","removeEventListener"],_t=["on","off"];function Y(i,l,c,u){if((0,B.T)(c)&&(u=c,c=void 0),u)return Y(i,l,c).pipe((0,k.I)(u));const[p,g]=function Tt(i){return(0,B.T)(i.addEventListener)&&(0,B.T)(i.removeEventListener)}(i)?Gt.map(_=>N=>i[_](l,N,c)):function dt(i){return(0,B.T)(i.addListener)&&(0,B.T)(i.removeListener)}(i)?Ht.map(nt(i,l)):function ft(i){return(0,B.T)(i.on)&&(0,B.T)(i.off)}(i)?_t.map(nt(i,l)):[];if(!p&&(0,et.X)(i))return(0,$t.Z)(_=>Y(_,l,c))((0,Bt.Tg)(i));if(!p)throw new TypeError("Invalid event target");return new y.c(_=>{const N=(...W)=>_.next(1<W.length?W:W[0]);return p(N),()=>g(N)})}function nt(i,l){return c=>u=>i[c](l,u)}var J=f(1413);const Z="GET_STORE",pt="STORE_UPATE",z="STORE_INIT",H="ACTION_DISPATCHED",ht=new s.nKC("STATE_FILTER"),gt=new s.nKC("BROADCAST_CHANNEL_NAME");class G{}const rt=new s.nKC("ALLOWED_ORIGIN"),Q=new s.nKC("KNOWN_ACTION"),kt=new s.nKC("DEBOUNCE_TIME");function ot(i){let l;if(Array.isArray(i)){l=[...i];const c=Object.getPrototypeOf(i);if(c!==Array.prototype){Object.setPrototypeOf(l,c);for(const u in i)!/^\d+$/.test(u)&&Object.hasOwn(i,u)&&(l[u]=i[u])}}else l=Object.create(Object.getPrototypeOf(i)),Object.assign(l,i);return l}function Wt(i,l){return"object"==typeof i&&"object"==typeof l&&null!==i&&null!==l?Object.getPrototypeOf(i)!==Object.getPrototypeOf(l):i!==l}function*At(i,l,c,u){if("object"==typeof i&&i){if(c.has(i))return;c.add(i)}if("object"!=typeof i||null===i||"object"!=typeof l||null===l)i!==l&&(yield{key:u,operation:"update",value:l});else{for(let p in i){const g=u+p;i[p]!==l[p]&&(p in l?Wt(i[p],l[p])?yield{key:g,operation:"update",value:l[p]}:i[p]instanceof Date?i[p].getTime()!==l[p].getTime()&&(yield{key:g,operation:"update",value:l[p]}):i[p]instanceof RegExp?i[p].toString()!==l[p].toString()&&(yield{key:g,operation:"update",value:l[p]}):yield*At(i[p],l[p],c,`${u}${p}.`):yield{key:g,operation:"remove"})}for(let p in l){const g=u+p;p in i||(yield{key:g,operation:"add",value:l[p]})}}}function Xt(i,l){return At(i,l,new WeakSet,"")}let yt=(()=>{class i{static{this.type="@@MESSAGE"}constructor(c){this.payload=c}}return i})(),It=(()=>{class i{static{this.type="@@INIT_MESSAGE"}constructor(c){this.payload=c}}return i})(),wt=(()=>{class i{constructor(c,u){this.commsService=c,this.store=u,this.init=()=>{this.subscription&&(console.warn("ChildHandler is already initiated, will re-initiate"),this.subscription.unsubscribe()),this.subscription=this.commsService.messages$.subscribe(p=>{p.type===pt?this.store.dispatch(new yt(p.payload)):p.type===z&&this.store.dispatch(new It(p.payload))}),this.commsService.postMessage({type:Z})}}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(G),s.KVO(E.il))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})(),se=(()=>{class i{constructor(c){this.commsService=c}handle(c,u,p){if(u instanceof E.OU)return p(c,u);if(u instanceof yt){if(u.payload.length>0){const g=function Zt(i,l){let c=ot(i);for(let u of l){const p=u.key.split(".");let g=c;for(let N of p.slice(0,-1)){if("object"!=typeof g[N]||null===g[N])throw console.error("Invalid diff key",u.key,"does not exist in state",i,"Navigated to",g),new Error(`Invalid diff key ${u.key} does not exist in state`);g=g[N]=ot(g[N])}let _=p.at(-1);switch(u.operation){case"add":case"update":g[_]=u.value;break;case"remove":delete g[_]}}return c}(c,u.payload);return p(g,u)}}else{if(u instanceof It)return p(u.payload,u);this.commsService.postMessage({type:H,actionType:u.constructor?.type,action:u})}return x.w}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(G))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})(),zt=(()=>{class i{constructor(c,u,p,g,_){this.store=c,this.commsService=u,this.stateFilter=p,this.debounce=_,this.subscriptions=[],this.init=()=>{if(this.subscriptions.length)for(console.warn("HostHandler is already initiated, will re-initiate");this.subscriptions.length;)this.subscriptions.pop()?.unsubscribe();let N;this.subscriptions.push(this.commsService.messages$.subscribe(C=>{switch(C.type){case H:this.onActionDispatched(C.actionType,C.action);break;case Z:this.onGetStore()}}));const W=new y.c(C=>{const q=this.store.subscribe(ce=>{C.next(ce)});return()=>q.unsubscribe()});this.subscriptions.push(W.pipe(this.debounce?function Ut(i,l=I){return(0,w.N)((c,u)=>{let p=null,g=null,_=null;const N=()=>{if(p){p.unsubscribe(),p=null;const C=g;g=null,u.next(C)}};function W(){const C=_+i,q=l.now();if(q<C)return p=this.schedule(void 0,C-q),void u.add(p);N()}c.subscribe((0,j._)(u,C=>{g=C,_=l.now(),p||(p=l.schedule(W,i),u.add(p))},()=>{N(),u.complete()},void 0,()=>{g=p=null}))})}(this.debounce):(0,Lt.M)(()=>{}),(0,lt.T)(C=>this.filterState(C)),(0,lt.T)(C=>{const q=Array.from(Xt(N,C));return N=C,q}),(0,Mt.p)(C=>C.length>0)).subscribe(C=>{this.commsService.postMessage({type:pt,payload:C})}))},this.debounce??=100,this.knownActions=new Map(g?.flat().map(N=>[N.type,N]))}filterState(c){if("function"==typeof this.stateFilter)return this.stateFilter(c);if(this.stateFilter instanceof RegExp){const u=this.stateFilter;return Object.fromEntries(Object.entries(c).filter(([p])=>u.test(p)))}return c}onGetStore(){this.commsService.postMessage({type:z,payload:this.filterState(this.store.snapshot())})}onActionDispatched(c,u){if(c){const p=this.knownActions.get(c),g=p?Object.create(p.prototype):new class{static{this.type=c}};this.store.dispatch(Object.assign(g,u))}else this.store.dispatch(u)}ngOnDestroy(){for(const c of this.subscriptions)c.unsubscribe()}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(E.il),s.KVO(G),s.KVO(ht,8),s.KVO(Q,8),s.KVO(kt,8))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})();function vt(i){if("string"==typeof i?.data?.type){switch(i.data.type){case H:case Z:case pt:break;default:console.warn("Unknown message type.",i.data)}return!0}return console.warn("Invalid message event",i),!1}let Ct=(()=>{class i{constructor(c){this.channel=new BroadcastChannel(c),this.messages$=Y(this.channel,"message").pipe((0,Mt.p)(vt),(0,lt.T)(u=>u.data))}postMessage(c){this.channel.postMessage(c)}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(gt))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})();const St="PORT_SETUP",Ot="PORT_TEARDOWN";let at=(()=>{class i{get eventSources(){return this.ports.values()}constructor(){this.$messages=new J.B,this.ports=new Map,this.messages$=this.$messages.asObservable(),this.eventSourcesChanged=new s.bkB,this.handleMessage=c=>{if(c.data===Ot){const u=c.source??c.target;u&&(this.ports.delete(u),u.removeEventListener("message",this.handleMessage),u.close())}else vt(c)&&this.$messages.next(c.data)},window.addEventListener("unload",()=>this.ngOnDestroy(!1))}addPort(c,u){this.ports.set(c,u),this.eventSourcesChanged.emit(),c.addEventListener("message",this.handleMessage),c.start()}removePort(c,u=!0){c.postMessage(Ot),c.removeEventListener("message",this.handleMessage),c.close(),u&&(this.ports.delete(c),this.eventSourcesChanged.emit())}ngOnDestroy(c=!0){for(const u of this.ports.keys())this.removePort(u,!1);c&&this.ports.clear(),this.$messages.complete()}postMessage(c){for(const u of this.ports.keys())u.postMessage(c)}static{this.\u0275fac=function(u){return new(u||i)}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})(),ie=(()=>{class i extends at{constructor(c){super(),c??=location.origin;const u=new MessageChannel;if(window.opener)this.addPort(u.port1,window.opener),window.opener.postMessage(St,c,[u.port2]);else{if(window.parent===window)throw new Error("Unable to connect to store host");this.addPort(u.port1,window.parent),window.parent.postMessage(St,c,[u.port2])}}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(rt,8))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})(),ae=(()=>{class i extends at{constructor(c){super(),c??=location.origin;const u=new Set("string"==typeof c?[c]:c.flat());window.addEventListener("message",p=>{!u.has("*")&&!u.has(p.origin)||p.data===St&&this.addPort(p.ports[0],p.source)})}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(rt,8))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac})}}return i})();function Yt(i,l){const c=[];return i?(c.push(zt),l?.filter&&c.push({provide:ht,useValue:l.filter})):c.push(wt,{provide:E.qu,useClass:se,multi:!0}),l?.knownActions instanceof Array&&c.push({provide:Q,useValue:l.knownActions,multi:!0}),"broadcast"===l?.messageHandler?c.push({provide:G,useClass:Ct},{provide:gt,useValue:l.broadcastChannelName??"NGXS Messages"}):typeof l?.messageHandler>"u"||"port"===l.messageHandler?(c.push({provide:at,useClass:i?ae:ie},{provide:G,useExisting:at}),l?.origin&&c.push({provide:rt,useValue:l.origin})):c.push({provide:G,useExisting:l.messageHandler}),{ngModule:Jt,providers:c}}let Jt=(()=>{class i{static forChild(c){return Yt(!1,c)}static forRoot(c){return Yt(!0,c)}constructor(c,u){c?.init()??u?.init()}static{this.\u0275fac=function(u){return new(u||i)(s.KVO(zt,8),s.KVO(wt,8))}}static{this.\u0275mod=s.$C({type:i})}static{this.\u0275inj=s.G2t({})}}return i})()}}]);